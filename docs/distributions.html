<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Lychee Documentation</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">

    <link rel="canonical" href="https://lycheeorg.github.io/docs/">

    <!-- Favicon -->
    <!-- <link rel="apple-touch-icon" sizes="180x180" href="/img/favicon/apple-touch-icon.png"> -->
    <link rel="icon" type="image/png" href="img/logo.png">
    <!-- <link rel="icon" type="image/png" sizes="32x32" href="/img/favicon/favicon-32x32.png"> -->
    <!-- <link rel="icon" type="image/png" sizes="16x16" href="/img/favicon/favicon-16x16.png"> -->
    <!-- <link rel="manifest" href="/img/favicon/site.webmanifest"> -->
    <!-- <link rel="mask-icon" href="/img/favicon/safari-pinned-tab.svg" color="#ff2d20"> -->
    <!-- <link rel="shortcut icon" href="/img/favicon/favicon.ico"> -->
    <meta name="msapplication-TileColor" content="#ff2d20">
    <!-- <meta name="msapplication-config" content="/img/favicon/browserconfig.xml"> -->
    <meta name="theme-color" content="#ffffff">

    <!-- Load fonts -->
    <link rel="stylesheet" href="https://use.typekit.net/ins2wgm.css">

    <!-- Load styles -->
    <link rel="stylesheet" type="text/css" href="css/app.css">

    <!-- Load JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.0/jquery.min.js"></script>
    <script src="js/vendor/require.js"></script>

</head>

<body class="language-php">

    <div class="sidebar_layout" id="docsScreen">

        <div class="page_contain">
            <div class="contain">
                <aside class="sidebar">
                    <a href="../" class="logo">
                        <img class="mark" src="img/logo.png" alt="Laravel">
                        <img class="type" src="img/Lychee.png" alt="Laravel">
                    </a>
                    <nav>
                        <div class="navigation_contain">
                            <div class="docs_sidebar">
                                <ul>
                                    <li class='sub--on'>
<h2>Prologue</h2>
<ul>
<li><a href='org.html'>Lychee & LycheeOrg</a></li>
<li><a href='releases.html'>Release Notes</a></li>
<li><a href='upgrade.html'>Upgrade from v3</a></li>
<li><a href='contributions.html'>Contribution Guide</a></li>
<li><a href='api.html'>API Documentation</a></li>
<li><a href='faq.html'>Frequently Asked Question</a></li>
</ul>
<li class='sub--on'>
<h2>Getting Started</h2>
<ul>
<li><a href='installation.html'>Installation</a></li>
<li><a href='configuration.html'>Configuration</a></li>
<li><a href='docker.html'>Docker</a></li>
<li><a href='update.html'>Update</a></li>
</ul>
<li class='sub--on'>
<h2>Digging Deeper</h2>
<ul>
<li><a href='settings.html'>Settings</a></li>
<li><a href='keyboard.html'>Keyboard Shortcuts</a></li>
<li><a href='read-more.html'>Lychee logic overview</a></li>
<li><a href='structure.html'>Directory Structure</a></li>
<li><a href='node.html'>Front-end</a></li>
<li class='active'><a href='distributions.html'>Distributions Examples</a></li>
</ul>

                                    <li class="laravel">
                                        <h2>Laravel Basics</h2>
                                        <ul>
                                            <li><a href="http://laravel.com/docs/7.x/routing">Routing</a></li>
                                            <li><a href="http://laravel.com/docs/7.x/middleware">Middleware</a></li>
                                            <li><a href="http://laravel.com/docs/7.x/csrf">CSRF Protection</a></li>
                                            <li><a href="http://laravel.com/docs/7.x/controllers">Controllers</a></li>
                                            <li><a href="http://laravel.com/docs/7.x/requests">Requests</a></li>
                                            <li><a href="http://laravel.com/docs/7.x/responses">Responses</a></li>
                                            <li><a href="http://laravel.com/docs/7.x/views">Views</a></li>
                                            <li><a href="http://laravel.com/docs/7.x/urls">URL Generation</a></li>
                                            <li><a href="http://laravel.com/docs/7.x/session">Session</a></li>
                                            <li><a href="http://laravel.com/docs/7.x/validation">Validation</a></li>
                                            <li><a href="http://laravel.com/docs/7.x/errors">Error Handling</a></li>
                                            <li><a href="http://laravel.com/docs/7.x/logging">Logging</a></li>
                                        </ul>
                                    </li>
                                    <li class="laravel">
                                        <h2>Laravel Database</h2>
                                        <ul>
                                            <li><a href="http://laravel.com/docs/7.x/database">Getting Started</a></li>
                                            <li><a href="http://laravel.com/docs/7.x/queries">Query Builder</a></li>
                                            <li><a href="http://laravel.com/docs/7.x/pagination">Pagination</a></li>
                                            <li><a href="http://laravel.com/docs/7.x/migrations">Migrations</a></li>
                                            <li><a href="http://laravel.com/docs/7.x/seeding">Seeding</a></li>
                                            <li><a href="http://laravel.com/docs/7.x/redis">Redis</a></li>
                                        </ul>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </nav>
                    <div class="trigger_contain">
                        <a href="#" class="nav_trigger" aria-label="Menu">
                            <div class="bar"></div>
                        </a>
                    </div>
                </aside>

                <section class="body_content">
                    <section class="docs_body">
                        <section class="docs_main">
                            <h1>Distributions Examples</h1>
                            
<ul>
<li><a href="#introduction">Introduction</a></li>
<li><a href="#separating-data-from-the-code">Separating Data from the Code</a></li>
<li><a href="#virutal-box-with-visual-studio-code">Virutal Box with Visual Studio Code</a><ul>
<li><a href="#set-up-port-forwarding">Set Up &amp; Port Forwarding</a></li>
<li><a href="#apache-and-proxy-in-the-host">Apache and Proxy in the Host</a></li>
<li><a href="#apache-in-the-guest">Apache in the Guest</a></li>
<li><a href="#visual-studio-code">Visual Studio Code</a></li>
</ul>
</li>
<li><a href="#with-linuxserverio-free">With Linuxserver.io (Free)</a></li>
<li><a href="#with-cloudron-paid">With Cloudron (Paid)</a></li>
</ul>

                            <hr> <div class="issuelinks">
<h2 id="introduction"><a class="toclink" href="#introduction">Introduction</a></h2>
<p>In this page we describe additional ways to install and potentially to develop on Lychee.</p>
<h2 id="separating-data-from-the-code"><a class="toclink" href="#separating-data-from-the-code">Separating Data from the Code</a></h2>
<p>As described in issue #486 , LudovicRousseau proposes a solution to separate your photo from the Lychee code.</p>
<p>He splits Lychee itself and the pictures into 2 directories:
- <code>Lychee</code> with the code of Lychee
- <code>Lychee-data</code> containing:</p>
<pre><code>Lychee-data/
└── public
    ├── dist
    │   ├── fonts
    │   └── resources
    └── uploads
        ├── big
        ├── import
        ├── medium
        ├── raw
        ├── small
        └── thumb
</code></pre>

<ul>
<li>his <code>Lychee/.env</code> contains:</li>
</ul>
<pre><code>LYCHEE_DIST=&quot;/var/www/Lychee-data/public/dist/&quot;
LYCHEE_UPLOADS=&quot;/var/www/Lychee-data/public/uploads/&quot;
</code></pre>

<blockquote>
<p>{note} Note that the <strong>path needs to be absolute</strong>.</p>
</blockquote>
<p>The upgrade script when a new version of Lychee is available is simple:</p>
<pre><code>mv Lychee Lychee.old
unzip Lychee.zip
cp Lychee.old/.env Lychee
chmod g+w -R Lychee/storage
sudo chgrp www-data -R Lychee/storage
cd Lychee
php artisan key:generate
php artisan migrate
</code></pre>

<p>It worked fine with the migration from 4.0.4 to 4.0.5 of Lychee.</p>
<p>The hierarchy <code>Lychee-data/public/</code> is writeable by the group <code>www-data</code> so that apache process can modify the files.
The files in <code>Lychee</code> are read only for apache. No write access needed.</p>
<h2 id="virutal-box-with-visual-studio-code"><a class="toclink" href="#virutal-box-with-visual-studio-code">Virutal Box with Visual Studio Code</a></h2>
<ul>
<li>Requires an Apache server with <code>proxy</code> and <code>proxy_http</code> enabled.</li>
<li>Requires a Virtual Machine (using e.g. VirtualBox)</li>
</ul>
<h3 id="set-up-port-forwarding"><a class="toclink" href="#set-up-port-forwarding">Set Up &amp; Port Forwarding</a></h3>
<p>Set up your VM as if you would install any server.</p>
<p>Set up the following port forwarding:</p>
<ul>
<li><code>host:10180</code> &Rarr; <code>guest:80</code></li>
<li><code>host:10122</code> &Rarr; <code>guest:22</code></li>
</ul>
<p>The first one will allow us to access the server from Local host, the second will allow us to connect to it via SSH.</p>
<h3 id="apache-and-proxy-in-the-host"><a class="toclink" href="#apache-and-proxy-in-the-host">Apache and Proxy in the Host</a></h3>
<p>Edit your <code>/etc/hosts</code> to contain:</p>
<pre><code>127.0.0.1   lychee.test
127.0.0.1   lycheeorg.test
</code></pre>

<p>Create configuration files in <code>/etc/apache2/sites-available</code>: <code>001-lychee-test.conf</code> and <code>002-lycheeorg-test.conf</code></p>
<pre><code>&lt;VirtualHost *:80&gt;
    ServerName lychee.test

    ProxyPass / http://localhost:10180/
    ProxyPassReverse / http://lychee.test/
    ProxyPreserveHost On
    ErrorLog ${APACHE_LOG_DIR}/error.log
    CustomLog ${APACHE_LOG_DIR}/access.log combined
&lt;/VirtualHost&gt;
</code></pre>

<p>and</p>
<pre><code>&lt;VirtualHost *:80&gt;
    ServerName lycheeorg.test

    ProxyPass / http://localhost:10180/
    ProxyPassReverse / http://lycheeorg.test/
    ProxyPreserveHost On
    ErrorLog ${APACHE_LOG_DIR}/error.log
    CustomLog ${APACHE_LOG_DIR}/access.log combined
&lt;/VirtualHost&gt;
</code></pre>

<p>Enable the sites and reload apache:</p>
<pre><code>sudo a2ensite 001-lychee-test.conf
sudo a2ensite 002-lycheeorg-test.conf
sudo systemctl restart apache2
</code></pre>

<h3 id="apache-in-the-guest"><a class="toclink" href="#apache-in-the-guest">Apache in the Guest</a></h3>
<p>In your guest OS, clone the Lychee repository (requires ssh key to be set up):</p>
<pre><code>git clone git@github.com:LycheeOrg/Lychee.git /var/www/html/Lychee
git clone git@github.con:LycheeOrg/LycheeOrg.github.io /var/www/html/LycheeOrg.github.io
</code></pre>

<p>Similarily in <code>/etc/apache2/sites-available</code> create 2 configuration files: <code>001-lychee.conf</code> and <code>002-lycheeorg.conf</code></p>
<pre><code>&lt;VirtualHost *:80&gt;
    ServerName lychee.test

    DocumentRoot /var/www/html/Lychee/public

    ErrorLog ${APACHE_LOG_DIR}/error.log
    CustomLog ${APACHE_LOG_DIR}/access.log combined
&lt;/VirtualHost&gt;
</code></pre>

<p>and</p>
<pre><code>&lt;VirtualHost *:80&gt;
    ServerName lycheeorg.test

    DocumentRoot /var/www/html/LycheeOrg.github.io

    ErrorLog ${APACHE_LOG_DIR}/error.log
    CustomLog ${APACHE_LOG_DIR}/access.log combined
&lt;/VirtualHost&gt;
</code></pre>

<p>Enable the sites and reload apache:</p>
<pre><code>sudo a2ensite 001-lychee-test.conf
sudo a2ensite 002-lycheeorg-test.conf
sudo systemctl restart apache2
</code></pre>

<p>Open a browser on your host and navigate to <a href="http://lychee.test">http://lychee.test</a> and <a href="http://lycheeorg.test">http://lycheeorg.test</a> enjoy.</p>
<h3 id="visual-studio-code"><a class="toclink" href="#visual-studio-code">Visual Studio Code</a></h3>
<p>If you use <a href="https://code.visualstudio.com/">Visual Studio Code</a>, you can use the <a href="https://marketplace.visualstudio.com/items?itemName=ms-vscode-remote.remote-ssh">remote ssh extension</a>. It will allow you to directly edit your files in your VM without having to upload and download the files.</p>
<h2 id="with-linuxserverio-free"><a class="toclink" href="#with-linuxserverio-free">With Linuxserver.io (Free)</a></h2>
<p>Linuxserver.io is a group of like minded enthusiasts from across the world who build and maintain the largest collection of Docker images on the web,
and at our core are the principles behind Free and Open Source Software.
Their primary goal is to provide easy-to-use and streamlined Docker images with clear and concise documentation.</p>
<p>You can find the corresponding Lychee image <a href="https://fleet.linuxserver.io/image?name=linuxserver/lychee">here</a>.</p>
<blockquote>
<p>{tip} Please note that we, at LycheeOrg, do not endorse LinuxServer.io.
We give the reader a link to their websites as they provide our software.
You are free to use their installation, however we will not be providing you support with their solution.</p>
</blockquote>
<h2 id="with-cloudron-paid"><a class="toclink" href="#with-cloudron-paid">With Cloudron (Paid)</a></h2>
<p>Cloudron is a complete solution for running apps on your server and keeping them up-to-date and secure.</p>
<p><a href="https://cloudron.io/store/com.electerious.lychee.cloudronapp.html"><img alt="Install" src="https://cloudron.io/img/button.svg" /></a></p>
<p>The source code for the package can be found <a href="https://git.cloudron.io/cloudron/lychee-app">here</a>.</p>
</div>
<p>See their pricing <a href="https://cloudron.io/pricing.html">here</a>.</p>
<blockquote>
<p>{tip} Please note that we, at LycheeOrg, do not endorse Couldron.
We give the reader a link to their websites as they provide our software.
You are free to use their installation, however we will not be providing you support with their solution.</p>
</blockquote>
                        </section>
                    </section>
                </section>
            </div>
        </div>

    </div>
</body>
<script src="js/app.js"></script>

</html>